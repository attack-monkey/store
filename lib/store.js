require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({4:[function(require,module,exports) {
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.__esModule=!0;var r=function(){function t(t){this.idCount=1,this.store=w(t)}return t.prototype.get=function(t,r){return e(t,r,this.store)},t.prototype.set=function(t,r){this.locked?console.log("This Store is locked. Unlock to perform set operations"):this.store=l(this.store,t,r)},t.prototype.push=function(t,r){var o=this;if(this.locked)console.log("This Store is locked. Unlock to perform push operations");else{var n=(O(r)?r:[r]).reduce(function(t,r){return t.push({id:o.idCount,value:r}),o.idCount++,t},e(t,void 0,this.store)||[]);this.store=l(this.store,t,n)}},t.prototype.unshift=function(t,r){var o=this;if(this.locked)console.log("This Store is locked. Unlock to perform unshift operations");else{var n=(O(r)?r:[r]).reduce(function(t,r){return t.unshift({id:o.idCount,value:r}),o.idCount++,t},e(t,void 0,this.store)||[]);this.store=l(this.store,t,n)}},t.prototype.update=function(t,r){this.locked?console.log("This Store is locked. Unlock to perform update operations"):k(t,r,this.store)},t.prototype.apply=function(t,r){if(!this.locked)return r(e(t,void 0,this.store));console.log("This Store is locked. Unlock to perform apply operations")},t.prototype.lock=function(){this.locked=!0},t.prototype.unlock=function(){this.locked=!1},t}();function e(t,r,e){if(!t&&!r)return e;if(!t&&r)return c(e,r);if(t){var n=a(t).reduce(function(t,r,e,n){return t?o(t,r):void 0},e);return r?c(n,r):n}}function o(t,r){return r.match(/\$/)?i(t,r):t[r]}function n(t,r){return r.match(/\$/)?u(t,r):r}function i(t,r){try{if(O(t))return t.filter(function(t){return t.id===parseInt(r.replace("$",""))})[0];throw"Error with $ ref => "+r+" not referencing a pushArray"}catch(t){console.error(t)}}function u(t,r){try{if(O(t)){var e=t.filter(function(t){return t.id===parseInt(r.replace("$",""))})[0];return t.indexOf(e)}throw"Error with $ ref => "+r+" not referencing a pushArray"}catch(t){console.error(t)}}function c(t,r){return t=d(t=f(t=s(t,r.filter),r.sort),r.limit),r.meta?t:Object.keys(t).map(function(r){return t[r].value})}function s(t,r){return r?Object.keys(t).map(function(r){return t[r]}).filter(function(t){return r(t)}):Object.keys(t).map(function(r){return t[r]})}function f(t,r){if(r){var e=O(r)?r:[r];return h(S(t),e)}return t}function d(t,r){if(r){var e=Object.keys(t);return r<e.length&&(e.length=r),e.map(function(r){return t[r]})}return t}function l(t,r,e){return p(t,r=a(r),e?w(e):void 0,0)}function a(t){try{if(t){if(t.length<1)throw"No target provided";return t.split("/").filter(function(t){return t})}throw"No target provided"}catch(t){console.error("Error in reading keys",t)}}function p(r,e,o,i){try{var u=n(r,e[i]);if(i+1===e.length){var c=o,s=void 0===o||null===o||"object"===(void 0===o?"undefined":t(o))&&Array.isArray(o)&&0===o.length||"object"===(void 0===o?"undefined":t(o))&&!Array.isArray(o)&&0===Object.keys(o).length?void 0:o;if(O(r)){var f=w(r);return s?(f.splice(u,1,s),f):(f.splice(u,1),f)}return Object.assign({},r,((d={})[u]=s,d))}c=r[u]?r[u]:{};return O(r)?((f=w(r)).splice(u,1,p(c,e,o,i+1)),f):Object.assign({},r,((l={})[u]=p(c,e,o,i+1),l))}catch(t){console.error("reducer error =>",t)}var d,l}function h(t,r,e){return t.reduce(function(t,e,o,n){t.old||(t.old=n);var i=r[0].dir&&"desc"===r[0].dir?b(t.old,r,0):y(t.old,r,0),u=t.new.concat([i]);return{old:t.old.filter(function(t){return t!==i}),new:u}},{new:[]}).new}function y(t,r,e){try{return t.reduce(function(t,o,n,i){return v(t,o,r,e)})}catch(t){console.error("Error - Trying to sort by an object instead of a value!")}}function v(r,e,o,n){var i=j(r,o[n].by),u=j(e,o[n].by);if("object"===(void 0===i?"undefined":t(i))||"object"===(void 0===u?"undefined":t(u)))throw!0;return m(i)<m(u)?r:m(i)>m(u)?e:o.length-1===n?r:o[++n].dir&&"desc"===o[n].dir?g(r,e,o,n):v(r,e,o,n)}function b(t,r,e){try{return t.reduce(function(t,o,n,i){return g(t,o,r,e)})}catch(t){console.error("Error - Trying to sort by an object instead of a value!")}}function g(r,e,o,n){var i=j(r,o[n].by),u=j(e,o[n].by);if("object"===(void 0===i?"undefined":t(i))||"object"===(void 0===u?"undefined":t(u)))throw!0;return m(i)>m(u)?r:m(i)<m(u)?e:o.length-1===n?r:o[++n].dir&&"desc"===o[n].dir?g(r,e,o,n):v(r,e,o,n)}function k(t,r,o){try{a(t),(O(r)?r:[r]).reduce(function(t,r){var e=t.filter(function(t){return t.id===r.id});if(0===e.length)throw"Cannot update a row that doesn't exist";var o=t.indexOf(e[0]);return t.splice(o,1,r),t},e(t,void 0,o)||[])}catch(t){console.error()}}function m(t){return"string"==typeof t?t.toLowerCase():t}function j(t,r){return r.split("/").reduce(function(t,r){return t[r]},t)}function w(t){return JSON.parse(JSON.stringify(t))}function S(t){return Object.keys(t).map(function(r){return t[r]})}function O(r){return"object"===(void 0===r?"undefined":t(r))&&Array.isArray(r)}exports.Store=r;
},{}],2:[function(require,module,exports) {
"use strict";exports.__esModule=!0;var l=require("./src"),e=new l.Store({});e.push("l1/l2/l3",[{cat:"red",val:1},{cat:"blue",val:2},{cat:"red",val:87},{cat:"red",val:4},{cat:"red",val:45}]),e.set("l1/l2/l3/$3/value",{cat:"red",val:455}),e.update("l1/l2/l3",[{id:1,value:{cat:"blue",val:-600}},{id:4,value:{cat:"blue",val:-1600}}]);var a=JSON.stringify(e.get("l1/l2/l3",{sort:[{by:"value/cat"},{by:"value/val",dir:"desc"}]}),null,2);document.querySelector("#response").innerHTML=a;
},{"./src":4}]},{},[2])